<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Detalle Ensayo</title>
        <meta charset="UTF-8">
    </head>
    <body>

        <div>

            <h1>Detalle Ensayo</h1>

            <p>
            <form th:object="${ensayo}">

                <!--Thymeleaf indica que una varaible fa refèrencia a un atribut d'una classe de l'aplicació, utilitzant
                    l'element precedint el nom th:field. El valor que li assignarem a aquest element serà el nom de
                    l'atribut de la classe al que fa referència, per exemple, *{idgos}, fa refèrencia a l'atribut idgos de 
                    la classe gos. Fixeu-vos que a diferència de les variables, quan es tracta d'un atribut, les claus de
                    l'atribut van precedides de *, en lloc de $.-->

                <!-- Camp ocult on guardem el valor de l'atribut idgos de la classe gos per enviar-lo juntament amb les altres dades.-->                 
                <input type="hidden" name="idevento" th:field="*{idevento}"/>

                <p>
                    <label for="nombreEvento">Nombre:</label> <!--Etiqueta on indiquem a l'usuari que ha d'introduir el nom del gos-->
                    <!--Thymeleaf associarà les dades afegides mitjançant aquest input, a l'atribut nom de l'objecte
                        gos assignat a th:objecte-->
                    <input type="text" name="nombreEvento" th:field="*{nombreEvento}"/>

                </p>

                <p>
                    <label for="fechaEvento">Fecha:</label> <!--Etiqueta per l'edat del gos-->            
                    <input type="text" name="fechaEvento" th:field="*{fechaEvento}"/> <!--Associem les dades introduïdes amb l'atribut edat-->
                </p>
                
                <p>
                    <label for="horario">Horario:</label> <!--Etiqueta per l'edat del gos-->            
                    <input type="text" name="horario" th:field="*{horario}"/> <!--Associem les dades introduïdes amb l'atribut edat-->
                </p>

                <p>
                    <label for="ubicacionEvento">Ubicacion</label> <!--Etiqueta pel sexe del gos-->            
                    <input type="text" name="ubicacionEvento" th:field="*{ubicacionEvento}"/> <!--Associem les dades introduïdes amb l'atribut sexe-->
                </p>

                <p>
                    <label for="duracion">Duracion:</label> <!--Etiqueta pel sexe del gos-->            
                    <input type="text" name="duracion" th:field="*{duracion}"/> <!--Associem les dades introduïdes amb l'atribut sexe-->
                </p>    
            </form>
        </p>
        <form th:action="@{/eliminar-castillos-asignados}" method="POST" th:object="${ensayo}">

            <input type="hidden" name="idevento" th:field="*{idevento}"/>

            <h3>Castillos Asignados</h3>

            <table border="1">
                <tr>
                    <th>Castillos Asignados</th>
                    <th>SI/NO</th>
                </tr>
                <tr th:each="castillo : ${castillosAsignados}">
                    <td th:text="${castillo.nombre}"></td>
                    <td>
                        <input type="checkbox" th:value="${castillo.idCastillo}" th:name="castillosId" />
                    </td>
                </tr>
            </table>
            
            <input type="submit" value="Quitar Castillos Asignados" th:disabled="${#lists.isEmpty(castillosAsignados)}">

        </form>

        <br>

        <h3>PASAR LISTA</h3>

        <h4>LISTA ASISTENTES</h4>

        <form th:action="@{/eliminar-asistentes}" method="POST" th:object="${ensayo}">

            <input type="hidden" name="idevento" th:field="*{idevento}"/>

            <div th:if="${usuariosAsignados!=null && !usuariosAsignados.empty}">

                <table border="1">
                    <tr>
                        <th>Nombre</th>
                        <th>Mail</th>
                        <th>Telefono</th>
                        <th>SI/NO</th>
                    </tr>
                    <tr th:each="usuario : ${usuariosAsignados}">
                        <th th:text="${usuario.username}"></th>
                        <th th:text="${usuario.mail}"></th>
                        <th th:text="${usuario.telefono}"></th>
                        <td>
                            <input type="checkbox" th:value="${usuario.idusuario}" th:name="usuariosAsignadosId" />
                        </td>
                    </tr>
                </table>

            </div>

            <div th:if="${usuariosAsignados==null || usuariosAsignados.empty}">

                <p>No hay usuarios asignados!</p>

            </div>

            <input type="submit" value="Quitar Asistente/s" th:disabled="${#lists.isEmpty(usuariosAsignados)}">

        </form>

        <form th:action="@{/anadir-usuarios}" method="POST" th:object="${ensayo}">

            <input type="hidden" name="idevento" th:field="*{idevento}"/>

            <h4>LISTA USUARIOS</h4>

            <div th:if="${usuarios!=null && !usuarios.empty}">

                <table border="1">
                    <tr>
                        <th>Nombre</th>
                        <th>Mail</th>
                        <th>Telefono</th>
                        <th>SI/NO</th>
                    </tr>
                    <tr th:each="usuario : ${usuarios}">
                        <th th:text="${usuario.username}"></th>
                        <th th:text="${usuario.mail}"></th>
                        <th th:text="${usuario.telefono}"></th>
                        <td>
                            <input type="checkbox" th:value="${usuario.idusuario}" th:name="usuariosId"> 
                        </td>
                    </tr>
                </table>

            </div>

            <div th:if="${usuarios==null || usuarios.empty}">

                <p>No existen más usuarios registrados!</p>

            </div>

            <input type="submit" value="Añadir Asistente/s" th:disabled="${#lists.isEmpty(usuarios)}">

        </form>

        <a href="/ensayos"><button>VOLVER</button></a>

    </div>

</body>
</html>