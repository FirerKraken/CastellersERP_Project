<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head th:replace = "~{layout/plantilla :: head}">
    </head>
    <body>

        <header th:replace="~{layout/plantilla :: menu}" />
        <div class="container">
            <div>
                <h1>Menú</h1>
                <h2>Calendari</h2>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Lun</th>
                            <th>Mar</th>
                            <th>Mie</th>
                            <th>Jue</th>
                            <th>Vie</th>
                            <th>Sab</th>
                            <th>Dom</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <!-- Iterar sobre el arreglo calendario para mostrar las filas -->
                        <tr th:each="fila : ${calendario}">
                            <!-- Iterar sobre cada ArrayList dentro de la fila para mostrar las celdas -->
                            <td th:each="celda : ${fila}">
                                <!-- Mostrar el primer valor del ArrayList -->
                                <span th:text="${celda[0]}"></span>
                                <!-- Si el ArrayList tiene más de un valor, mostrar los demás -->
                                <div th:if="${#lists.size(celda) > 1}">
                                    <span th:each="valor : ${celda}" th:unless="${#strings.equals(valor, celda[0])}">
                                        <span th:text="${valor}"></span>
                                        <br />
                                    </span>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h2>Taula de circulars</h2>

                <div th:if = "${circulares != null && !circulares.empty}">

                    <table class="table">
                        <thead class="table-warning">
                            <tr>
                                <th th:text = "Títol"></th>
                                <th th:text = "Missatge"></th>
                                <th th:if="${ocultar}" th:text = "Accions"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each = "circular : ${circulares}">
                                <td th:text = ${circular.titulo}></td>
                                <td th:text = ${circular.mensaje}></td>
                                <td th:if="${ocultar}">
                                    <a th:href = "@{/editarCircular/}+${circular.idcircular}">
                                        <button type="button" class="btn btn-warning"><i class="fa-solid fa-pencil"></i></button>
                                    </a>
                                    <a th:href="@{/eliminarCircular/}+${circular.idcircular}">
                                         <button type="button" class="btn btn-danger"><i class="fa-solid fa-trash-can" style="color: #ffffff;"></i></button>
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div th:if = "${circulares == null || circulares.empty}">
                    No hi ha apunts en la llista
                </div>
                <div><a th:if="${ocultar}" type="button" class="btn btn-outline-warning" th:href ="@{/formularioCircular}" th:text = "Afegir"></a></div>
            </div>

            <br>
            <br>

            <form method="POST" th:action="@{/logout}">                
                <!-- Botó per sortir de l'aplicació-->
                <p><input class="btn btn-outline-danger" type="submit" name="logout" value="Sortir"/></p> 
            </form>
        </div>
    </body>
</html>
